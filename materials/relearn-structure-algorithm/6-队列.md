# 队列

> 队列：先进先出的线性表

## 基础

1. 与「栈」数据结构类似，「队列」也是一种限制的线性表，它遵循**先进先出**的原则。

2. 队列的特点是**先进先出：**

- 先进：队列的数据操作只能在末端进行，不允许在队列的中间某个结点后新增数据。
- 后出：队列的数据删除只能在始端进行，不允许在队列的中间某个结点删除数据。

3. 队列存在两种存储方式，即顺序队列和链式队列：

- 顺序队列 - 依赖数据来实现，其中的数据在内存中时顺序存储。
- 链式队列 - 依赖链表来实现，其中的数据依赖每个结点的指针互联，在内存中并不是顺序存储。

`注意：链式队列实际上就是只能尾进头出的线性表的单链表。`

4. 什么是队列？

在队列中，将队头指针(front)指向头结点，队尾指针(rear)指向队尾结点。无论是哪一种实现方式，一个队列都依赖队头(front)和队尾(rear)两个指针唯一确定。

- 当队列为空时，front 和 rear 都指向头结点。
- 队列从 front 删除元素，从 rear 插入元素。

5. 对于一个顺序队列的数组来说，设置一个 front 指针来指向队头和一个 rear 指针指向队尾，不断进行插入删除操作时，头尾两个指针都会不断向后移动。

- 新增一条数据，时间复杂度为 O(1)。
- 利用 front 指针删除一条数据，队列中剩余的元素都需要向前移动一个位置，以保证下标为 0 的位置不为空，时间复杂度为 O(n)。

  5.1. 这样的删除操作时间复杂度过高，如何解决呢？

可以通过移动指针的方式来删除数据，但是这样的操作可能产生**数组越界**的问题。

6. 简单粗暴的解决数组“假溢出”的方法：

- 不惜消耗 O(n)的时间复杂度移动数据。
- 开辟足够大的内存空间保证数组不会越界。

7. 数组越界的问题可以通过队列的一个特殊变种来解决，叫做**循环队列。**

- 循环队列进行新增操作时，先判断队列是否已满。如果不满，就将新元素赋值给队尾，然后让 rear 指针向后移动一个位置；如果已经排到队列最后的位置，则 rear 指针重新指向头部。
- 删除操作时，即出队操作，需要判断队列是否为空，不为空，将队头元素赋值给返回值，front 指针向后移一个位置；如果已经排到队列最后的位置，就把 front 指针重新指向到头部。

8. 循环队列中，如何判断队列是「空」还是「满」？

常用的方法是设置一个标志变量 flag 来区别队列是空还是满。

9. 「链式队列」是一个单链表，同时增加了 front 指针和 rear 指针，链式队列通常会增加一个头结点，且 front 指针指向头结点，**头结点不存储数据，只是用来辅助标识。**

10. 为什么队列强调要有头结点呢？

主要是为了防止删除最后一个有效数据结点后，front 指针和 rear 指针变成了「野指针」，导致队列没有意义。有了头结点后，即使队列为空，也保证了 front 指针和 rear 指针有意义。

11. 队列的查找的时间复杂度是 O(n)。

## 小结

1. 队列的增和删的操作只能在这个线性表的头和尾进行。

2. 时间复杂度：

- 循环队列和链式队列的增、删都是 O(1)。
- 查找操作是 O(n)。

3. 空间性能方面：

- 循环队列必须有一个固定的长度，因此存在存储元素数量和空间的浪费问题。
- 链式队列更为灵活一些。

4. 一般来说，建议：

- 如果可以确定队列长度最大值时，使用「循环队列」。
- 无法确定队列长度时，可以考虑使用「链式队列」。

5. 队列具有「先进先出」的特点，在面对数据处理顺序非常敏感的问题时，「队列」是个不错的技术选型。
